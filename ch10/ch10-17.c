/*
    학번 : 202511204
    이름 : 강기민
    프로그램 명 : ch10 PPT 예제 10-15 : 공용체의 정의 및 사용
    날짜 : 2025.10.01
*/

/*
    관련 개념:
    공용체(union)는 구조체(struct)와 달리 모든 멤버가 같은 메모리 공간을 공유한다.
    그래서 "멤버 변수의 주소가 모두 동일하다."
    따라서 하나의 멤버에 값을 저장하면, 같은 메모리 공간을 쓰는 다른 멤버의 값도 영향을 받는다.

    메모리 동작:
    union의 크기는 가장 큰 멤버의 크기와 같다.
    여기서는 int(4바이트), char(1바이트), short(2바이트) 중 int가 가장 크므로 4바이트가 된다.
*/

#include <stdio.h>

union test {
    int i;
    char c;
    short s;
};

// 기능명: main. 공용체 사용 예제
// 내용: union 멤버들의 주소 및 값을 출력하여 메모리 공유 특성을 확인한다.
// 입력: 없음
// 출력: 공용체 크기, 멤버 주소, 각 멤버 값 출력
// 오류: 없음

int main(void)
{
    union test t1 = { 0x12345678 }; // i 멤버를 0x12345678로 초기화

    printf("sizeof(union test) = %d\n", sizeof(union test)); // 공용체 크기 출력

    printf("t1.i의 주소 = %p\n", &t1.i); // 모든 멤버는 같은 주소를 가짐
    printf("t1.c의 주소 = %p\n", &t1.c);
    printf("t1.s의 주소 = %p\n", &t1.s);

    printf("t1.i = %x\n", t1.i); // 12345678 출력
    printf("t1.c = %x\n", t1.c); // 하위 1바이트(78) 출력
    printf("t1.s = %x\n", t1.s); // 하위 2바이트(5678) 출력

    return 0;
}
